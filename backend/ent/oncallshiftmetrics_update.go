// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"github.com/google/uuid"
	"github.com/rezible/rezible/ent/oncallshift"
	"github.com/rezible/rezible/ent/oncallshiftmetrics"
	"github.com/rezible/rezible/ent/predicate"
)

// OncallShiftMetricsUpdate is the builder for updating OncallShiftMetrics entities.
type OncallShiftMetricsUpdate struct {
	config
	hooks     []Hook
	mutation  *OncallShiftMetricsMutation
	modifiers []func(*sql.UpdateBuilder)
}

// Where appends a list predicates to the OncallShiftMetricsUpdate builder.
func (_u *OncallShiftMetricsUpdate) Where(ps ...predicate.OncallShiftMetrics) *OncallShiftMetricsUpdate {
	_u.mutation.Where(ps...)
	return _u
}

// SetShiftID sets the "shift_id" field.
func (_u *OncallShiftMetricsUpdate) SetShiftID(v uuid.UUID) *OncallShiftMetricsUpdate {
	_u.mutation.SetShiftID(v)
	return _u
}

// SetNillableShiftID sets the "shift_id" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableShiftID(v *uuid.UUID) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetShiftID(*v)
	}
	return _u
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *OncallShiftMetricsUpdate) SetUpdatedAt(v time.Time) *OncallShiftMetricsUpdate {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetNillableUpdatedAt sets the "updated_at" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableUpdatedAt(v *time.Time) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetUpdatedAt(*v)
	}
	return _u
}

// SetBurdenScore sets the "burden_score" field.
func (_u *OncallShiftMetricsUpdate) SetBurdenScore(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetBurdenScore()
	_u.mutation.SetBurdenScore(v)
	return _u
}

// SetNillableBurdenScore sets the "burden_score" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableBurdenScore(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetBurdenScore(*v)
	}
	return _u
}

// AddBurdenScore adds value to the "burden_score" field.
func (_u *OncallShiftMetricsUpdate) AddBurdenScore(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddBurdenScore(v)
	return _u
}

// SetEventFrequency sets the "event_frequency" field.
func (_u *OncallShiftMetricsUpdate) SetEventFrequency(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetEventFrequency()
	_u.mutation.SetEventFrequency(v)
	return _u
}

// SetNillableEventFrequency sets the "event_frequency" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableEventFrequency(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetEventFrequency(*v)
	}
	return _u
}

// AddEventFrequency adds value to the "event_frequency" field.
func (_u *OncallShiftMetricsUpdate) AddEventFrequency(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddEventFrequency(v)
	return _u
}

// SetLifeImpact sets the "life_impact" field.
func (_u *OncallShiftMetricsUpdate) SetLifeImpact(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetLifeImpact()
	_u.mutation.SetLifeImpact(v)
	return _u
}

// SetNillableLifeImpact sets the "life_impact" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableLifeImpact(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetLifeImpact(*v)
	}
	return _u
}

// AddLifeImpact adds value to the "life_impact" field.
func (_u *OncallShiftMetricsUpdate) AddLifeImpact(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddLifeImpact(v)
	return _u
}

// SetTimeImpact sets the "time_impact" field.
func (_u *OncallShiftMetricsUpdate) SetTimeImpact(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetTimeImpact()
	_u.mutation.SetTimeImpact(v)
	return _u
}

// SetNillableTimeImpact sets the "time_impact" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableTimeImpact(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetTimeImpact(*v)
	}
	return _u
}

// AddTimeImpact adds value to the "time_impact" field.
func (_u *OncallShiftMetricsUpdate) AddTimeImpact(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddTimeImpact(v)
	return _u
}

// SetResponseRequirements sets the "response_requirements" field.
func (_u *OncallShiftMetricsUpdate) SetResponseRequirements(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetResponseRequirements()
	_u.mutation.SetResponseRequirements(v)
	return _u
}

// SetNillableResponseRequirements sets the "response_requirements" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableResponseRequirements(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetResponseRequirements(*v)
	}
	return _u
}

// AddResponseRequirements adds value to the "response_requirements" field.
func (_u *OncallShiftMetricsUpdate) AddResponseRequirements(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddResponseRequirements(v)
	return _u
}

// SetIsolation sets the "isolation" field.
func (_u *OncallShiftMetricsUpdate) SetIsolation(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetIsolation()
	_u.mutation.SetIsolation(v)
	return _u
}

// SetNillableIsolation sets the "isolation" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableIsolation(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetIsolation(*v)
	}
	return _u
}

// AddIsolation adds value to the "isolation" field.
func (_u *OncallShiftMetricsUpdate) AddIsolation(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddIsolation(v)
	return _u
}

// SetIncidentsTotal sets the "incidents_total" field.
func (_u *OncallShiftMetricsUpdate) SetIncidentsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetIncidentsTotal()
	_u.mutation.SetIncidentsTotal(v)
	return _u
}

// SetNillableIncidentsTotal sets the "incidents_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableIncidentsTotal(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetIncidentsTotal(*v)
	}
	return _u
}

// AddIncidentsTotal adds value to the "incidents_total" field.
func (_u *OncallShiftMetricsUpdate) AddIncidentsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddIncidentsTotal(v)
	return _u
}

// SetIncidentResponseTime sets the "incident_response_time" field.
func (_u *OncallShiftMetricsUpdate) SetIncidentResponseTime(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetIncidentResponseTime()
	_u.mutation.SetIncidentResponseTime(v)
	return _u
}

// SetNillableIncidentResponseTime sets the "incident_response_time" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableIncidentResponseTime(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetIncidentResponseTime(*v)
	}
	return _u
}

// AddIncidentResponseTime adds value to the "incident_response_time" field.
func (_u *OncallShiftMetricsUpdate) AddIncidentResponseTime(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddIncidentResponseTime(v)
	return _u
}

// SetEventsTotal sets the "events_total" field.
func (_u *OncallShiftMetricsUpdate) SetEventsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetEventsTotal()
	_u.mutation.SetEventsTotal(v)
	return _u
}

// SetNillableEventsTotal sets the "events_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableEventsTotal(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetEventsTotal(*v)
	}
	return _u
}

// AddEventsTotal adds value to the "events_total" field.
func (_u *OncallShiftMetricsUpdate) AddEventsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddEventsTotal(v)
	return _u
}

// SetAlertsTotal sets the "alerts_total" field.
func (_u *OncallShiftMetricsUpdate) SetAlertsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetAlertsTotal()
	_u.mutation.SetAlertsTotal(v)
	return _u
}

// SetNillableAlertsTotal sets the "alerts_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableAlertsTotal(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetAlertsTotal(*v)
	}
	return _u
}

// AddAlertsTotal adds value to the "alerts_total" field.
func (_u *OncallShiftMetricsUpdate) AddAlertsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddAlertsTotal(v)
	return _u
}

// SetInterruptsTotal sets the "interrupts_total" field.
func (_u *OncallShiftMetricsUpdate) SetInterruptsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetInterruptsTotal()
	_u.mutation.SetInterruptsTotal(v)
	return _u
}

// SetNillableInterruptsTotal sets the "interrupts_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableInterruptsTotal(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetInterruptsTotal(*v)
	}
	return _u
}

// AddInterruptsTotal adds value to the "interrupts_total" field.
func (_u *OncallShiftMetricsUpdate) AddInterruptsTotal(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddInterruptsTotal(v)
	return _u
}

// SetInterruptsNight sets the "interrupts_night" field.
func (_u *OncallShiftMetricsUpdate) SetInterruptsNight(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetInterruptsNight()
	_u.mutation.SetInterruptsNight(v)
	return _u
}

// SetNillableInterruptsNight sets the "interrupts_night" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableInterruptsNight(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetInterruptsNight(*v)
	}
	return _u
}

// AddInterruptsNight adds value to the "interrupts_night" field.
func (_u *OncallShiftMetricsUpdate) AddInterruptsNight(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddInterruptsNight(v)
	return _u
}

// SetInterruptsBusinessHours sets the "interrupts_business_hours" field.
func (_u *OncallShiftMetricsUpdate) SetInterruptsBusinessHours(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.ResetInterruptsBusinessHours()
	_u.mutation.SetInterruptsBusinessHours(v)
	return _u
}

// SetNillableInterruptsBusinessHours sets the "interrupts_business_hours" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdate) SetNillableInterruptsBusinessHours(v *float32) *OncallShiftMetricsUpdate {
	if v != nil {
		_u.SetInterruptsBusinessHours(*v)
	}
	return _u
}

// AddInterruptsBusinessHours adds value to the "interrupts_business_hours" field.
func (_u *OncallShiftMetricsUpdate) AddInterruptsBusinessHours(v float32) *OncallShiftMetricsUpdate {
	_u.mutation.AddInterruptsBusinessHours(v)
	return _u
}

// SetShift sets the "shift" edge to the OncallShift entity.
func (_u *OncallShiftMetricsUpdate) SetShift(v *OncallShift) *OncallShiftMetricsUpdate {
	return _u.SetShiftID(v.ID)
}

// Mutation returns the OncallShiftMetricsMutation object of the builder.
func (_u *OncallShiftMetricsUpdate) Mutation() *OncallShiftMetricsMutation {
	return _u.mutation
}

// ClearShift clears the "shift" edge to the OncallShift entity.
func (_u *OncallShiftMetricsUpdate) ClearShift() *OncallShiftMetricsUpdate {
	_u.mutation.ClearShift()
	return _u
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (_u *OncallShiftMetricsUpdate) Save(ctx context.Context) (int, error) {
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *OncallShiftMetricsUpdate) SaveX(ctx context.Context) int {
	affected, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (_u *OncallShiftMetricsUpdate) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *OncallShiftMetricsUpdate) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *OncallShiftMetricsUpdate) check() error {
	if _u.mutation.TenantCleared() && len(_u.mutation.TenantIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "OncallShiftMetrics.tenant"`)
	}
	if _u.mutation.ShiftCleared() && len(_u.mutation.ShiftIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "OncallShiftMetrics.shift"`)
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (_u *OncallShiftMetricsUpdate) Modify(modifiers ...func(u *sql.UpdateBuilder)) *OncallShiftMetricsUpdate {
	_u.modifiers = append(_u.modifiers, modifiers...)
	return _u
}

func (_u *OncallShiftMetricsUpdate) sqlSave(ctx context.Context) (_node int, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(oncallshiftmetrics.Table, oncallshiftmetrics.Columns, sqlgraph.NewFieldSpec(oncallshiftmetrics.FieldID, field.TypeUUID))
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(oncallshiftmetrics.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := _u.mutation.BurdenScore(); ok {
		_spec.SetField(oncallshiftmetrics.FieldBurdenScore, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedBurdenScore(); ok {
		_spec.AddField(oncallshiftmetrics.FieldBurdenScore, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.EventFrequency(); ok {
		_spec.SetField(oncallshiftmetrics.FieldEventFrequency, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedEventFrequency(); ok {
		_spec.AddField(oncallshiftmetrics.FieldEventFrequency, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.LifeImpact(); ok {
		_spec.SetField(oncallshiftmetrics.FieldLifeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedLifeImpact(); ok {
		_spec.AddField(oncallshiftmetrics.FieldLifeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.TimeImpact(); ok {
		_spec.SetField(oncallshiftmetrics.FieldTimeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedTimeImpact(); ok {
		_spec.AddField(oncallshiftmetrics.FieldTimeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.ResponseRequirements(); ok {
		_spec.SetField(oncallshiftmetrics.FieldResponseRequirements, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedResponseRequirements(); ok {
		_spec.AddField(oncallshiftmetrics.FieldResponseRequirements, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.Isolation(); ok {
		_spec.SetField(oncallshiftmetrics.FieldIsolation, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedIsolation(); ok {
		_spec.AddField(oncallshiftmetrics.FieldIsolation, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.IncidentsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldIncidentsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedIncidentsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldIncidentsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.IncidentResponseTime(); ok {
		_spec.SetField(oncallshiftmetrics.FieldIncidentResponseTime, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedIncidentResponseTime(); ok {
		_spec.AddField(oncallshiftmetrics.FieldIncidentResponseTime, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.EventsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldEventsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedEventsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldEventsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AlertsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldAlertsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedAlertsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldAlertsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.InterruptsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldInterruptsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedInterruptsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldInterruptsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.InterruptsNight(); ok {
		_spec.SetField(oncallshiftmetrics.FieldInterruptsNight, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedInterruptsNight(); ok {
		_spec.AddField(oncallshiftmetrics.FieldInterruptsNight, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.InterruptsBusinessHours(); ok {
		_spec.SetField(oncallshiftmetrics.FieldInterruptsBusinessHours, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedInterruptsBusinessHours(); ok {
		_spec.AddField(oncallshiftmetrics.FieldInterruptsBusinessHours, field.TypeFloat32, value)
	}
	if _u.mutation.ShiftCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: true,
			Table:   oncallshiftmetrics.ShiftTable,
			Columns: []string{oncallshiftmetrics.ShiftColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(oncallshift.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.ShiftIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: true,
			Table:   oncallshiftmetrics.ShiftTable,
			Columns: []string{oncallshiftmetrics.ShiftColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(oncallshift.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_spec.AddModifiers(_u.modifiers...)
	if _node, err = sqlgraph.UpdateNodes(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{oncallshiftmetrics.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	_u.mutation.done = true
	return _node, nil
}

// OncallShiftMetricsUpdateOne is the builder for updating a single OncallShiftMetrics entity.
type OncallShiftMetricsUpdateOne struct {
	config
	fields    []string
	hooks     []Hook
	mutation  *OncallShiftMetricsMutation
	modifiers []func(*sql.UpdateBuilder)
}

// SetShiftID sets the "shift_id" field.
func (_u *OncallShiftMetricsUpdateOne) SetShiftID(v uuid.UUID) *OncallShiftMetricsUpdateOne {
	_u.mutation.SetShiftID(v)
	return _u
}

// SetNillableShiftID sets the "shift_id" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableShiftID(v *uuid.UUID) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetShiftID(*v)
	}
	return _u
}

// SetUpdatedAt sets the "updated_at" field.
func (_u *OncallShiftMetricsUpdateOne) SetUpdatedAt(v time.Time) *OncallShiftMetricsUpdateOne {
	_u.mutation.SetUpdatedAt(v)
	return _u
}

// SetNillableUpdatedAt sets the "updated_at" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableUpdatedAt(v *time.Time) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetUpdatedAt(*v)
	}
	return _u
}

// SetBurdenScore sets the "burden_score" field.
func (_u *OncallShiftMetricsUpdateOne) SetBurdenScore(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetBurdenScore()
	_u.mutation.SetBurdenScore(v)
	return _u
}

// SetNillableBurdenScore sets the "burden_score" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableBurdenScore(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetBurdenScore(*v)
	}
	return _u
}

// AddBurdenScore adds value to the "burden_score" field.
func (_u *OncallShiftMetricsUpdateOne) AddBurdenScore(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddBurdenScore(v)
	return _u
}

// SetEventFrequency sets the "event_frequency" field.
func (_u *OncallShiftMetricsUpdateOne) SetEventFrequency(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetEventFrequency()
	_u.mutation.SetEventFrequency(v)
	return _u
}

// SetNillableEventFrequency sets the "event_frequency" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableEventFrequency(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetEventFrequency(*v)
	}
	return _u
}

// AddEventFrequency adds value to the "event_frequency" field.
func (_u *OncallShiftMetricsUpdateOne) AddEventFrequency(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddEventFrequency(v)
	return _u
}

// SetLifeImpact sets the "life_impact" field.
func (_u *OncallShiftMetricsUpdateOne) SetLifeImpact(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetLifeImpact()
	_u.mutation.SetLifeImpact(v)
	return _u
}

// SetNillableLifeImpact sets the "life_impact" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableLifeImpact(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetLifeImpact(*v)
	}
	return _u
}

// AddLifeImpact adds value to the "life_impact" field.
func (_u *OncallShiftMetricsUpdateOne) AddLifeImpact(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddLifeImpact(v)
	return _u
}

// SetTimeImpact sets the "time_impact" field.
func (_u *OncallShiftMetricsUpdateOne) SetTimeImpact(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetTimeImpact()
	_u.mutation.SetTimeImpact(v)
	return _u
}

// SetNillableTimeImpact sets the "time_impact" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableTimeImpact(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetTimeImpact(*v)
	}
	return _u
}

// AddTimeImpact adds value to the "time_impact" field.
func (_u *OncallShiftMetricsUpdateOne) AddTimeImpact(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddTimeImpact(v)
	return _u
}

// SetResponseRequirements sets the "response_requirements" field.
func (_u *OncallShiftMetricsUpdateOne) SetResponseRequirements(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetResponseRequirements()
	_u.mutation.SetResponseRequirements(v)
	return _u
}

// SetNillableResponseRequirements sets the "response_requirements" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableResponseRequirements(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetResponseRequirements(*v)
	}
	return _u
}

// AddResponseRequirements adds value to the "response_requirements" field.
func (_u *OncallShiftMetricsUpdateOne) AddResponseRequirements(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddResponseRequirements(v)
	return _u
}

// SetIsolation sets the "isolation" field.
func (_u *OncallShiftMetricsUpdateOne) SetIsolation(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetIsolation()
	_u.mutation.SetIsolation(v)
	return _u
}

// SetNillableIsolation sets the "isolation" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableIsolation(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetIsolation(*v)
	}
	return _u
}

// AddIsolation adds value to the "isolation" field.
func (_u *OncallShiftMetricsUpdateOne) AddIsolation(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddIsolation(v)
	return _u
}

// SetIncidentsTotal sets the "incidents_total" field.
func (_u *OncallShiftMetricsUpdateOne) SetIncidentsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetIncidentsTotal()
	_u.mutation.SetIncidentsTotal(v)
	return _u
}

// SetNillableIncidentsTotal sets the "incidents_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableIncidentsTotal(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetIncidentsTotal(*v)
	}
	return _u
}

// AddIncidentsTotal adds value to the "incidents_total" field.
func (_u *OncallShiftMetricsUpdateOne) AddIncidentsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddIncidentsTotal(v)
	return _u
}

// SetIncidentResponseTime sets the "incident_response_time" field.
func (_u *OncallShiftMetricsUpdateOne) SetIncidentResponseTime(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetIncidentResponseTime()
	_u.mutation.SetIncidentResponseTime(v)
	return _u
}

// SetNillableIncidentResponseTime sets the "incident_response_time" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableIncidentResponseTime(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetIncidentResponseTime(*v)
	}
	return _u
}

// AddIncidentResponseTime adds value to the "incident_response_time" field.
func (_u *OncallShiftMetricsUpdateOne) AddIncidentResponseTime(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddIncidentResponseTime(v)
	return _u
}

// SetEventsTotal sets the "events_total" field.
func (_u *OncallShiftMetricsUpdateOne) SetEventsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetEventsTotal()
	_u.mutation.SetEventsTotal(v)
	return _u
}

// SetNillableEventsTotal sets the "events_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableEventsTotal(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetEventsTotal(*v)
	}
	return _u
}

// AddEventsTotal adds value to the "events_total" field.
func (_u *OncallShiftMetricsUpdateOne) AddEventsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddEventsTotal(v)
	return _u
}

// SetAlertsTotal sets the "alerts_total" field.
func (_u *OncallShiftMetricsUpdateOne) SetAlertsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetAlertsTotal()
	_u.mutation.SetAlertsTotal(v)
	return _u
}

// SetNillableAlertsTotal sets the "alerts_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableAlertsTotal(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetAlertsTotal(*v)
	}
	return _u
}

// AddAlertsTotal adds value to the "alerts_total" field.
func (_u *OncallShiftMetricsUpdateOne) AddAlertsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddAlertsTotal(v)
	return _u
}

// SetInterruptsTotal sets the "interrupts_total" field.
func (_u *OncallShiftMetricsUpdateOne) SetInterruptsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetInterruptsTotal()
	_u.mutation.SetInterruptsTotal(v)
	return _u
}

// SetNillableInterruptsTotal sets the "interrupts_total" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableInterruptsTotal(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetInterruptsTotal(*v)
	}
	return _u
}

// AddInterruptsTotal adds value to the "interrupts_total" field.
func (_u *OncallShiftMetricsUpdateOne) AddInterruptsTotal(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddInterruptsTotal(v)
	return _u
}

// SetInterruptsNight sets the "interrupts_night" field.
func (_u *OncallShiftMetricsUpdateOne) SetInterruptsNight(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetInterruptsNight()
	_u.mutation.SetInterruptsNight(v)
	return _u
}

// SetNillableInterruptsNight sets the "interrupts_night" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableInterruptsNight(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetInterruptsNight(*v)
	}
	return _u
}

// AddInterruptsNight adds value to the "interrupts_night" field.
func (_u *OncallShiftMetricsUpdateOne) AddInterruptsNight(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddInterruptsNight(v)
	return _u
}

// SetInterruptsBusinessHours sets the "interrupts_business_hours" field.
func (_u *OncallShiftMetricsUpdateOne) SetInterruptsBusinessHours(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.ResetInterruptsBusinessHours()
	_u.mutation.SetInterruptsBusinessHours(v)
	return _u
}

// SetNillableInterruptsBusinessHours sets the "interrupts_business_hours" field if the given value is not nil.
func (_u *OncallShiftMetricsUpdateOne) SetNillableInterruptsBusinessHours(v *float32) *OncallShiftMetricsUpdateOne {
	if v != nil {
		_u.SetInterruptsBusinessHours(*v)
	}
	return _u
}

// AddInterruptsBusinessHours adds value to the "interrupts_business_hours" field.
func (_u *OncallShiftMetricsUpdateOne) AddInterruptsBusinessHours(v float32) *OncallShiftMetricsUpdateOne {
	_u.mutation.AddInterruptsBusinessHours(v)
	return _u
}

// SetShift sets the "shift" edge to the OncallShift entity.
func (_u *OncallShiftMetricsUpdateOne) SetShift(v *OncallShift) *OncallShiftMetricsUpdateOne {
	return _u.SetShiftID(v.ID)
}

// Mutation returns the OncallShiftMetricsMutation object of the builder.
func (_u *OncallShiftMetricsUpdateOne) Mutation() *OncallShiftMetricsMutation {
	return _u.mutation
}

// ClearShift clears the "shift" edge to the OncallShift entity.
func (_u *OncallShiftMetricsUpdateOne) ClearShift() *OncallShiftMetricsUpdateOne {
	_u.mutation.ClearShift()
	return _u
}

// Where appends a list predicates to the OncallShiftMetricsUpdate builder.
func (_u *OncallShiftMetricsUpdateOne) Where(ps ...predicate.OncallShiftMetrics) *OncallShiftMetricsUpdateOne {
	_u.mutation.Where(ps...)
	return _u
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (_u *OncallShiftMetricsUpdateOne) Select(field string, fields ...string) *OncallShiftMetricsUpdateOne {
	_u.fields = append([]string{field}, fields...)
	return _u
}

// Save executes the query and returns the updated OncallShiftMetrics entity.
func (_u *OncallShiftMetricsUpdateOne) Save(ctx context.Context) (*OncallShiftMetrics, error) {
	return withHooks(ctx, _u.sqlSave, _u.mutation, _u.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (_u *OncallShiftMetricsUpdateOne) SaveX(ctx context.Context) *OncallShiftMetrics {
	node, err := _u.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (_u *OncallShiftMetricsUpdateOne) Exec(ctx context.Context) error {
	_, err := _u.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_u *OncallShiftMetricsUpdateOne) ExecX(ctx context.Context) {
	if err := _u.Exec(ctx); err != nil {
		panic(err)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_u *OncallShiftMetricsUpdateOne) check() error {
	if _u.mutation.TenantCleared() && len(_u.mutation.TenantIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "OncallShiftMetrics.tenant"`)
	}
	if _u.mutation.ShiftCleared() && len(_u.mutation.ShiftIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "OncallShiftMetrics.shift"`)
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (_u *OncallShiftMetricsUpdateOne) Modify(modifiers ...func(u *sql.UpdateBuilder)) *OncallShiftMetricsUpdateOne {
	_u.modifiers = append(_u.modifiers, modifiers...)
	return _u
}

func (_u *OncallShiftMetricsUpdateOne) sqlSave(ctx context.Context) (_node *OncallShiftMetrics, err error) {
	if err := _u.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(oncallshiftmetrics.Table, oncallshiftmetrics.Columns, sqlgraph.NewFieldSpec(oncallshiftmetrics.FieldID, field.TypeUUID))
	id, ok := _u.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "OncallShiftMetrics.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := _u.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, oncallshiftmetrics.FieldID)
		for _, f := range fields {
			if !oncallshiftmetrics.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != oncallshiftmetrics.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := _u.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := _u.mutation.UpdatedAt(); ok {
		_spec.SetField(oncallshiftmetrics.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := _u.mutation.BurdenScore(); ok {
		_spec.SetField(oncallshiftmetrics.FieldBurdenScore, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedBurdenScore(); ok {
		_spec.AddField(oncallshiftmetrics.FieldBurdenScore, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.EventFrequency(); ok {
		_spec.SetField(oncallshiftmetrics.FieldEventFrequency, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedEventFrequency(); ok {
		_spec.AddField(oncallshiftmetrics.FieldEventFrequency, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.LifeImpact(); ok {
		_spec.SetField(oncallshiftmetrics.FieldLifeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedLifeImpact(); ok {
		_spec.AddField(oncallshiftmetrics.FieldLifeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.TimeImpact(); ok {
		_spec.SetField(oncallshiftmetrics.FieldTimeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedTimeImpact(); ok {
		_spec.AddField(oncallshiftmetrics.FieldTimeImpact, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.ResponseRequirements(); ok {
		_spec.SetField(oncallshiftmetrics.FieldResponseRequirements, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedResponseRequirements(); ok {
		_spec.AddField(oncallshiftmetrics.FieldResponseRequirements, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.Isolation(); ok {
		_spec.SetField(oncallshiftmetrics.FieldIsolation, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedIsolation(); ok {
		_spec.AddField(oncallshiftmetrics.FieldIsolation, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.IncidentsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldIncidentsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedIncidentsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldIncidentsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.IncidentResponseTime(); ok {
		_spec.SetField(oncallshiftmetrics.FieldIncidentResponseTime, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedIncidentResponseTime(); ok {
		_spec.AddField(oncallshiftmetrics.FieldIncidentResponseTime, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.EventsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldEventsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedEventsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldEventsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AlertsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldAlertsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedAlertsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldAlertsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.InterruptsTotal(); ok {
		_spec.SetField(oncallshiftmetrics.FieldInterruptsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedInterruptsTotal(); ok {
		_spec.AddField(oncallshiftmetrics.FieldInterruptsTotal, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.InterruptsNight(); ok {
		_spec.SetField(oncallshiftmetrics.FieldInterruptsNight, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedInterruptsNight(); ok {
		_spec.AddField(oncallshiftmetrics.FieldInterruptsNight, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.InterruptsBusinessHours(); ok {
		_spec.SetField(oncallshiftmetrics.FieldInterruptsBusinessHours, field.TypeFloat32, value)
	}
	if value, ok := _u.mutation.AddedInterruptsBusinessHours(); ok {
		_spec.AddField(oncallshiftmetrics.FieldInterruptsBusinessHours, field.TypeFloat32, value)
	}
	if _u.mutation.ShiftCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: true,
			Table:   oncallshiftmetrics.ShiftTable,
			Columns: []string{oncallshiftmetrics.ShiftColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(oncallshift.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := _u.mutation.ShiftIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: true,
			Table:   oncallshiftmetrics.ShiftTable,
			Columns: []string{oncallshiftmetrics.ShiftColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(oncallshift.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_spec.AddModifiers(_u.modifiers...)
	_node = &OncallShiftMetrics{config: _u.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, _u.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{oncallshiftmetrics.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	_u.mutation.done = true
	return _node, nil
}
